(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d.VueResizablePanels={},d.Vue))})(this,function(d,e){"use strict";const C=Symbol("PanelGroupContext");let N=0;function I(o){return o||(N++,`vue-resizable-panels:${N}`)}const R=e.defineComponent({__name:"Panel",props:{id:{},className:{default:""},collapsedSize:{default:0},collapsible:{type:Boolean,default:!1},defaultSize:{},maxSize:{},minSize:{},onCollapse:{},onExpand:{},onResize:{},order:{},style:{},tagName:{default:"div"}},emits:["collapse","expand","resize"],setup(o,{expose:r,emit:t}){const l=o,u=t,z=e.inject(C);if(!z)throw new Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:m,expandPanel:s,getPanelSize:S,getPanelStyle:h,groupId:a,isPanelCollapsed:n,reevaluatePanelConstraints:c,registerPanel:g,resizePanel:v,unregisterPanel:E}=z,P=I(l.id),i=e.ref({callbacks:{onCollapse:()=>u("collapse"),onExpand:()=>u("expand"),onResize:(p,b)=>u("resize",p,b)},constraints:{collapsedSize:l.collapsedSize,collapsible:l.collapsible,defaultSize:l.defaultSize,maxSize:l.maxSize,minSize:l.minSize},id:P,idIsFromProps:l.id!==void 0,order:l.order}),f=e.computed(()=>S(i.value)),y=e.computed(()=>n(i.value)),M=e.computed(()=>({...h(i.value,l.defaultSize),...l.style}));return e.watch(()=>[l.collapsedSize,l.collapsible,l.maxSize,l.minSize],([p,b,_,k],[W,J,L,Q])=>{const x={...i.value.constraints};i.value.constraints.collapsedSize=p,i.value.constraints.collapsible=b,i.value.constraints.maxSize=_,i.value.constraints.minSize=k,(x.collapsedSize!==p||x.collapsible!==b||x.maxSize!==_||x.minSize!==k)&&c(i.value,x)},{deep:!0}),e.onMounted(()=>{g(i.value)}),e.onUnmounted(()=>{E(i.value)}),r({collapse:()=>m(i.value),expand:p=>s(i.value,p),getId:()=>P,getSize:()=>S(i.value),isCollapsed:()=>y.value,isExpanded:()=>!n(i.value),resize:p=>v(i.value,p)}),(p,b)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(p.tagName),{class:e.normalizeClass(p.className),style:e.normalizeStyle(M.value),"data-panel":!0,"data-panel-id":e.unref(P),"data-panel-size":f.value,"data-panel-collapsible":p.collapsible||void 0,"data-panel-collapsed":y.value||void 0},{default:e.withCtx(()=>[e.renderSlot(p.$slots,"default")]),_:3},8,["class","style","data-panel-id","data-panel-size","data-panel-collapsible","data-panel-collapsed"]))}});function H({defaultSize:o,dragState:r,layout:t,panelData:l,panelIndex:u,precision:z=3}){const m=t[u];let s;return m==null?s=o!=null?o.toPrecision(z):"1":l.length===1?s="1":s=m.toPrecision(z),{flexBasis:0,flexGrow:s,flexShrink:1,overflow:"hidden",pointerEvents:r!==null?"none":void 0}}const w=e.defineComponent({__name:"PanelGroup",props:{id:{},className:{default:""},direction:{},style:{default:()=>({})},tagName:{default:"div"},autoSaveId:{}},emits:["layout"],setup(o,{emit:r}){const t=o,l=I(t.id),u=e.ref(),z=e.ref(null),m=e.ref([]),s=e.ref([]),S=e.computed(()=>({display:"flex",flexDirection:t.direction==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%",...t.style})),h=e.reactive({collapsePanel:a=>{console.log("collapsePanel",a)},direction:t.direction,dragState:z.value,expandPanel:(a,n)=>{console.log("expandPanel",a,n)},getPanelSize:a=>{const n=s.value.findIndex(c=>c.id===a.id);return m.value[n]||0},getPanelStyle:(a,n)=>{const c=s.value.findIndex(g=>g.id===a.id);return H({defaultSize:n,dragState:z.value,layout:m.value,panelData:s.value,panelIndex:c})},groupId:l,isPanelCollapsed:a=>!1,isPanelExpanded:a=>!h.isPanelCollapsed(a),reevaluatePanelConstraints:(a,n)=>{console.log("reevaluatePanelConstraints",a,n)},registerPanel:a=>{if(s.value.push(a),m.value.length===0){const n=100/s.value.length;m.value=s.value.map(()=>n)}},registerResizeHandle:a=>n=>{console.log("resize handle event",a,n)},resizePanel:(a,n)=>{const c=s.value.findIndex(g=>g.id===a.id);c!==-1&&(m.value[c]=n)},startDragging:(a,n)=>{console.log("startDragging",a,n)},stopDragging:()=>{z.value=null},unregisterPanel:a=>{const n=s.value.findIndex(c=>c.id===a.id);n!==-1&&(s.value.splice(n,1),m.value.splice(n,1))},panelGroupElement:u.value||null});return e.provide(C,h),(a,n)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a.tagName),{ref_key:"panelGroupElementRef",ref:u,class:e.normalizeClass(a.className),style:e.normalizeStyle(S.value),"data-panel-group":!0,"data-panel-group-id":e.unref(l),"data-panel-group-direction":a.direction},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"default")]),_:3},8,["class","style","data-panel-group-id","data-panel-group-direction"]))}}),D=e.defineComponent({__name:"PanelResizeHandle",props:{id:{},className:{default:""},disabled:{type:Boolean,default:!1},style:{default:()=>({})},tabIndex:{default:0},tagName:{default:"div"}},emits:["blur","focus","dragging","pointerDown","pointerUp"],setup(o,{emit:r}){const t=o,l=r,u=e.inject(C);if(!u)throw new Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:z,groupId:m,registerResizeHandle:s,startDragging:S,stopDragging:h,panelGroupElement:a}=u,n=e.ref(),c=I(t.id),g=e.ref(null),v=e.ref(!1),E=e.computed(()=>({...t.style,cursor:z==="horizontal"?"col-resize":"row-resize"})),P=()=>{v.value=!1,l("blur")},i=()=>{v.value=!0,l("focus")};return e.watch(()=>t.disabled,f=>{if(f)g.value=null;else{const y=s(c);g.value=y}},{immediate:!0}),e.onMounted(()=>{if(!t.disabled){const f=s(c);g.value=f}}),e.onUnmounted(()=>{g.value=null}),(f,y)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(f.tagName),{ref_key:"elementRef",ref:n,class:e.normalizeClass(f.className),style:e.normalizeStyle(E.value),tabindex:f.disabled?void 0:f.tabIndex,"data-panel-resize-handle":!0,"data-panel-resize-handle-id":e.unref(c),"data-panel-resize-handle-enabled":!f.disabled||void 0,"data-panel-resize-handle-disabled":f.disabled||void 0,onBlur:P,onFocus:i},{default:e.withCtx(()=>[e.renderSlot(f.$slots,"default")]),_:3},40,["class","style","tabindex","data-panel-resize-handle-id","data-panel-resize-handle-enabled","data-panel-resize-handle-disabled"]))}});function F(o,r){if(!o)throw new Error(r||"Assertion failed")}function q(o,r){if(o.length!==r.length)return!1;for(let t=0;t<o.length;t++)if(o[t]!==r[t])return!1;return!0}const G=5;function B(o,r,t=G){const l=parseFloat(o.toFixed(t)),u=parseFloat(r.toFixed(t));return l<u?-1:l>u?1:0}function $(o,r,t=G){return B(o,r,t)===0}const j={Panel:R,PanelGroup:w,PanelResizeHandle:D};d.Panel=R,d.PanelGroup=w,d.PanelResizeHandle=D,d.areEqual=q,d.assert=F,d.default=j,d.fuzzyCompareNumbers=B,d.fuzzyNumbersEqual=$,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
